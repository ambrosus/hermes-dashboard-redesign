{"ast":null,"code":"import axios from 'axios';\nimport { SET_ETH_ADDRESS, SIGN_IN } from './constants';\nimport generateToken from '../../../utils/generateToken';\nexport const setEthAddress = () => {\n  const address = window.web3.eth.accounts.create();\n  return {\n    type: SET_ETH_ADDRESS,\n    payload: {\n      privateKey: address.privateKey,\n      publicKey: address.address\n    }\n  };\n};\nexport const setPublicKeyAction = publicKey => ({\n  type: SET_ETH_ADDRESS,\n  payload: {\n    privateKey: '',\n    publicKey\n  }\n});\nexport const signIn = privateKey => dispatch => {\n  const token = generateToken(privateKey);\n  axios.defaults.headers.common = {\n    Authorization: `AMB_TOKEN ${token}`,\n    'Content-Type': 'application/json'\n  };\n  const account = window.web3.eth.accounts.privateKeyToAccount(privateKey);\n  axios.get(`https://vitalii427-hermes.ambrosus-test.io/account/${account.address}`).then(({\n    data\n  }) => {\n    if (data.meta && data.meta.code === 200) {\n      dispatch({\n        type: SIGN_IN,\n        payload: data.data\n      });\n      sessionStorage.setItem('user_public_key', privateKey);\n    }\n  });\n};","map":{"version":3,"sources":["/Users/melnychenkovadim/WebstormProjects/dashboard-redisgn/hermes-dashboard-redesign/src/store/modules/auth/actions.js"],"names":["axios","SET_ETH_ADDRESS","SIGN_IN","generateToken","setEthAddress","address","window","web3","eth","accounts","create","type","payload","privateKey","publicKey","setPublicKeyAction","signIn","dispatch","token","defaults","headers","common","Authorization","account","privateKeyToAccount","get","then","data","meta","code","sessionStorage","setItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,EAA0BC,OAA1B,QAAyC,aAAzC;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM;AACjC,QAAMC,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBC,QAAhB,CAAyBC,MAAzB,EAAhB;AACA,SAAO;AACLC,IAAAA,IAAI,EAAEV,eADD;AAELW,IAAAA,OAAO,EAAE;AACPC,MAAAA,UAAU,EAAER,OAAO,CAACQ,UADb;AAEPC,MAAAA,SAAS,EAAET,OAAO,CAACA;AAFZ;AAFJ,GAAP;AAOD,CATM;AAWP,OAAO,MAAMU,kBAAkB,GAAID,SAAD,KAAgB;AAChDH,EAAAA,IAAI,EAAEV,eAD0C;AAEhDW,EAAAA,OAAO,EAAE;AACPC,IAAAA,UAAU,EAAE,EADL;AAEPC,IAAAA;AAFO;AAFuC,CAAhB,CAA3B;AAQP,OAAO,MAAME,MAAM,GAAIH,UAAD,IAAiBI,QAAD,IAAc;AAClD,QAAMC,KAAK,GAAGf,aAAa,CAACU,UAAD,CAA3B;AAEAb,EAAAA,KAAK,CAACmB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,GAAgC;AAC9BC,IAAAA,aAAa,EAAG,aAAYJ,KAAM,EADJ;AAE9B,oBAAgB;AAFc,GAAhC;AAKA,QAAMK,OAAO,GAAGjB,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBC,QAAhB,CAAyBe,mBAAzB,CAA6CX,UAA7C,CAAhB;AACAb,EAAAA,KAAK,CACFyB,GADH,CAEK,sDAAqDF,OAAO,CAAClB,OAAQ,EAF1E,EAIGqB,IAJH,CAIQ,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAc;AAClB,QAAIA,IAAI,CAACC,IAAL,IAAaD,IAAI,CAACC,IAAL,CAAUC,IAAV,KAAmB,GAApC,EAAyC;AACvCZ,MAAAA,QAAQ,CAAC;AACPN,QAAAA,IAAI,EAAET,OADC;AAEPU,QAAAA,OAAO,EAAEe,IAAI,CAACA;AAFP,OAAD,CAAR;AAIAG,MAAAA,cAAc,CAACC,OAAf,CAAuB,iBAAvB,EAA0ClB,UAA1C;AACD;AACF,GAZH;AAaD,CAtBM","sourcesContent":["import axios from 'axios';\nimport { SET_ETH_ADDRESS, SIGN_IN } from './constants';\nimport generateToken from '../../../utils/generateToken';\n\nexport const setEthAddress = () => {\n  const address = window.web3.eth.accounts.create();\n  return {\n    type: SET_ETH_ADDRESS,\n    payload: {\n      privateKey: address.privateKey,\n      publicKey: address.address,\n    },\n  };\n};\n\nexport const setPublicKeyAction = (publicKey) => ({\n  type: SET_ETH_ADDRESS,\n  payload: {\n    privateKey: '',\n    publicKey,\n  },\n});\n\nexport const signIn = (privateKey) => (dispatch) => {\n  const token = generateToken(privateKey);\n\n  axios.defaults.headers.common = {\n    Authorization: `AMB_TOKEN ${token}`,\n    'Content-Type': 'application/json',\n  };\n\n  const account = window.web3.eth.accounts.privateKeyToAccount(privateKey);\n  axios\n    .get(\n      `https://vitalii427-hermes.ambrosus-test.io/account/${account.address}`,\n    )\n    .then(({ data }) => {\n      if (data.meta && data.meta.code === 200) {\n        dispatch({\n          type: SIGN_IN,\n          payload: data.data,\n        });\n        sessionStorage.setItem('user_public_key', privateKey);\n      }\n    });\n};\n"]},"metadata":{},"sourceType":"module"}